<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Checkout ‚Äî MiawShoes</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --gold: #d4af37;
  --light-gold: #fff3d8;
  --text-dark: #4a3b2d;
  --bg-cream: #fffaf4;
}
body {
  font-family: 'Poppins', sans-serif;
  background-color: var(--bg-cream);
  color: var(--text-dark);
}
nav {
  background: #fff;
  border-bottom: 1px solid #eee;
  padding: 12px 20px;
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
nav a {
  text-decoration: none;
  color: var(--gold);
  font-weight: 600;
  transition: 0.2s;
}
nav a:hover {
  color: #b8860b;
}
.container {
  max-width: 900px;
  margin-top: 50px;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.05);
  padding: 30px 25px;
}
h2 {
  text-align: center;
  margin-bottom: 30px;
  color: var(--gold);
  font-weight: 700;
}
.cart-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px dashed #eee;
  padding: 15px 0;
  flex-wrap: wrap;
}
.cart-item img {
  width: 80px;
  height: 80px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.item-info {
  flex: 1;
  margin-left: 15px;
}
.item-info strong {
  display: block;
  font-size: 1rem;
  color: var(--text-dark);
}
.item-info small {
  color: #777;
  display: block;
  margin-bottom: 6px;
}
.controls {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}
.controls button {
  width: 32px;
  height: 32px;
  border: none;
  background: var(--gold);
  color: white;
  border-radius: 8px;
  font-weight: bold;
  transition: 0.2s;
}
.controls button:hover {
  background: #b8860b;
}
.controls select {
  border-radius: 8px;
  padding: 4px 6px;
  border: 1px solid #ccc;
}
.remove-btn {
  border: none;
  background: #ff6b6b;
  color: #fff;
  border-radius: 8px;
  padding: 5px 10px;
  font-size: 0.85rem;
  transition: 0.2s;
}
.remove-btn:hover {
  background: #e05252;
}
.total-line {
  display: flex;
  justify-content: space-between;
  margin-top: 25px;
  font-weight: 700;
  font-size: 1.1rem;
  color: var(--text-dark);
  border-top: 2px solid #f2e7d5;
  padding-top: 15px;
}
.btn-checkout {
  width: 100%;
  padding: 14px;
  background: linear-gradient(45deg,#ffd700,#b8860b);
  border: none;
  border-radius: 30px;
  font-weight: 700;
  color: white;
  margin-top: 25px;
  font-size: 1.1rem;
  transition: all 0.3s ease;
}
.btn-checkout:hover {
  transform: translateY(-2px);
  background: linear-gradient(45deg,#b8860b,#ffd700);
  box-shadow: 0 4px 12px rgba(184,134,11,0.3);
}
.empty {
  text-align: center;
  color: #999;
  margin: 40px 0;
}
</style>
</head>
<body>

<nav>
  <a href="collection.html">‚Üê Kembali Belanja</a>
  <span class="fw-bold">Checkout üêæ</span>
</nav>

<div class="container">
  <h2>Ringkasan Pesanan</h2>
  <div id="cartItemsContainer"></div>

  <div class="total-line">
    <span>Total:</span>
    <span id="cartTotal">Rp 0</span>
  </div>

  <button id="placeOrderBtn" class="btn-checkout">Buat Pesanan ‚ú®</button>
</div>

<script>
const SIZES = ["36","37","38","39","40","41","42"];
let cart = JSON.parse(localStorage.getItem("cart")) || [];

const cartItemsContainer = document.getElementById("cartItemsContainer");
const cartTotalEl = document.getElementById("cartTotal");

function formatRp(num) {
  return "Rp " + Number(num).toLocaleString("id-ID");
}

function renderCart() {
  cartItemsContainer.innerHTML = "";
  let total = 0;

  if (cart.length === 0) {
    cartItemsContainer.innerHTML = `<p class="empty">Keranjang kamu kosong üòø<br><small>Yuk kembali belanja sepatu lucu!</small></p>`;
    cartTotalEl.textContent = "Rp 0";
    return;
  }

  cart.forEach((item, index) => {
    const itemTotal = item.price * item.quantity;
    total += itemTotal;

    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <img src="${item.image}" alt="${item.name}">
      <div class="item-info">
        <strong>${item.name}</strong>
        <small>${formatRp(item.price)} √ó ${item.quantity}</small>
        <div class="controls">
          <button class="qty-btn minus" data-index="${index}">‚àí</button>
          <span>${item.quantity}</span>
          <button class="qty-btn plus" data-index="${index}">+</button>
          <select class="size-select" data-index="${index}">
            ${SIZES.map(size => `<option value="${size}" ${item.size == size ? "selected" : ""}>${size}</option>`).join("")}
          </select>
          <button class="remove-btn" data-index="${index}">üóëÔ∏è</button>
        </div>
      </div>
      <div class="fw-bold">${formatRp(itemTotal)}</div>
    `;
    cartItemsContainer.appendChild(div);
  });

  cartTotalEl.textContent = formatRp(total);

  // Quantity control
  document.querySelectorAll(".qty-btn.plus").forEach(btn => {
    btn.addEventListener("click", () => {
      const idx = btn.dataset.index;
      cart[idx].quantity++;
      saveCart();
    });
  });
  document.querySelectorAll(".qty-btn.minus").forEach(btn => {
    btn.addEventListener("click", () => {
      const idx = btn.dataset.index;
      if (cart[idx].quantity > 1) cart[idx].quantity--;
      else cart.splice(idx, 1);
      saveCart();
    });
  });

  // Size select
  document.querySelectorAll(".size-select").forEach(sel => {
    sel.addEventListener("change", () => {
      const idx = sel.dataset.index;
      cart[idx].size = sel.value;
      saveCart(false);
    });
  });

  // Remove item
  document.querySelectorAll(".remove-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const idx = btn.dataset.index;
      cart.splice(idx, 1);
      saveCart();
    });
  });
}

function saveCart(refresh = true) {
  localStorage.setItem("cart", JSON.stringify(cart));
  if (refresh) renderCart();
}

document.getElementById("placeOrderBtn").addEventListener("click", () => {
  if (cart.length === 0) {
    alert("Keranjang masih kosong üòø");
    return;
  }
  alert("Pesanan kamu berhasil dibuat! üéâ‚ú®");
  localStorage.removeItem("cart");
  window.location.href = "index.html";
});

renderCart();
</script>
</body>
</html>
